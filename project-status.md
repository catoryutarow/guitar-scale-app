# ã‚®ã‚¿ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«ã‚ã‹ã‚‹å› - Project Status

**Generated:** 2026-02-03
**Version:** 0.1.0
**Live Domain:** guitar-scale.com

---

## 1. Project Overview

ã‚®ã‚¿ãƒªã‚¹ãƒˆãŒã‚¹ã‚±ãƒ¼ãƒ«ã‚’å­¦ç¿’ãƒ»è¦–è¦šåŒ–ã™ã‚‹ãŸã‚ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚æŒ‡æ¿ä¸Šã®ã‚¹ã‚±ãƒ¼ãƒ«è¡¨ç¤ºã€éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®ã‚­ãƒ¼/ã‚¹ã‚±ãƒ¼ãƒ«æ¤œå‡ºã€YouTubeå‹•ç”»ã«ã‚ˆã‚‹å­¦ç¿’æ”¯æ´ã‚’æä¾›ã™ã‚‹ã€‚

### Main Features
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚®ã‚¿ãƒ¼æŒ‡æ¿è¡¨ç¤ºï¼ˆ6ã€œ9å¼¦ã€å„ç¨®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°å¯¾å¿œï¼‰
- 13ç¨®é¡ã®ã‚¹ã‚±ãƒ¼ãƒ«å¯¾å¿œï¼ˆãƒ¡ã‚¸ãƒ£ãƒ¼ã€ãƒã‚¤ãƒŠãƒ¼ã€ãƒšãƒ³ã‚¿ãƒˆãƒ‹ãƒƒã‚¯ã€ãƒ¢ãƒ¼ãƒ‰ç­‰ï¼‰
- éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«è§£æã«ã‚ˆã‚‹ã‚­ãƒ¼/ã‚¹ã‚±ãƒ¼ãƒ«æ¤œå‡ºï¼ˆé–‹ç™ºä¸­ï¼‰
- ã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿï¼ˆWeb Audio APIï¼‰
- å¤šè¨€èªå¯¾å¿œï¼ˆæ—¥æœ¬èªã€è‹±èªã€ä¸­å›½èªã€ã‚¹ãƒšã‚¤ãƒ³èªï¼‰
- æ•™è‚²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆãƒ–ãƒ­ã‚°è¨˜äº‹ã€YouTubeå‹•ç”»ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼‰

---

## 2. Technology Stack

### Frontend
| Technology | Version | Purpose |
|------------|---------|---------|
| Next.js | 16.1.1 | ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆApp Router + Turbopackï¼‰ |
| React | 19.2.0 | UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| TypeScript | 5.x | å‹å®‰å…¨æ€§ |
| Tailwind CSS | 4.x | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |
| Vercel Blob | - | ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ |
| Google Analytics 4 | - | ã‚¢ã‚¯ã‚»ã‚¹è§£æ |

### Backend
| Technology | Version | Purpose |
|------------|---------|---------|
| FastAPI | - | APIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| Python | 3.11 | ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  |
| librosa | 0.10.1 | éŸ³å£°å‡¦ç†ï¼ˆäºˆå®šï¼‰ |
| Docker | - | ã‚³ãƒ³ãƒ†ãƒŠåŒ– |

---

## 3. Project Structure

```
guitar-scale-app/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ [locale]/          # å¤šè¨€èªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° (ja/en/zh/es)
â”‚   â”‚   â”œâ”€â”€ page.tsx       # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ï¼ˆã‚¹ã‚±ãƒ¼ãƒ«å¯è¦–åŒ–ï¼‰
â”‚   â”‚   â”œâ”€â”€ layout.tsx     # ãƒ­ã‚±ãƒ¼ãƒ«åˆ¥ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ + SEOãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â”œâ”€â”€ analysis/      # éŸ³å£°è§£æãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ articles/      # ãƒ–ãƒ­ã‚°è¨˜äº‹ï¼ˆ5è¨˜äº‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ about/         # ã‚¢ãƒã‚¦ãƒˆãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ contact/       # ãŠå•ã„åˆã‚ã›
â”‚   â”‚   â”œâ”€â”€ terms/         # åˆ©ç”¨è¦ç´„
â”‚   â”‚   â”œâ”€â”€ privacy/       # ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼
â”‚   â”‚   â””â”€â”€ company/       # ä¼šç¤¾æ¦‚è¦
â”‚   â”œâ”€â”€ api/               # APIãƒ«ãƒ¼ãƒˆï¼ˆupload, analysis proxyï¼‰
â”‚   â”œâ”€â”€ opengraph-image.tsx # OGç”»åƒå‹•çš„ç”Ÿæˆï¼ˆ1200x630 PNGï¼‰
â”‚   â”œâ”€â”€ sitemap.ts         # å¤šè¨€èªã‚µã‚¤ãƒˆãƒãƒƒãƒ—ï¼ˆ52ã‚¨ãƒ³ãƒˆãƒªï¼‰
â”‚   â””â”€â”€ not-found.tsx      # 404ãƒšãƒ¼ã‚¸
â”‚
â”œâ”€â”€ components/            # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ GuitarFretboard.tsx    # æŒ‡æ¿è¡¨ç¤ºï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
â”‚   â”œâ”€â”€ AudioAnalyzer.tsx      # éŸ³å£°è§£æã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼
â”‚   â”œâ”€â”€ ScalePlayer.tsx        # ã‚¹ã‚±ãƒ¼ãƒ«å†ç”Ÿ
â”‚   â”œâ”€â”€ LocaleLink.tsx         # ãƒ­ã‚±ãƒ¼ãƒ«å¯¾å¿œãƒªãƒ³ã‚¯
â”‚   â””â”€â”€ [ãã®ä»–15+ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ]
â”‚
â”œâ”€â”€ lib/                   # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ scales.ts          # ã‚¹ã‚±ãƒ¼ãƒ«å®šç¾©ãƒ»è¨ˆç®—API
â”‚   â”œâ”€â”€ scaleEngine.ts     # éŸ³æ¥½ç†è«–æº–æ‹ ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ pitchSpelling.ts   # éŸ³åãƒ»ç•°ååŒéŸ³å‡¦ç†
â”‚   â”œâ”€â”€ tunings.ts         # ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°å®šç¾©ï¼ˆ13ç¨®é¡ï¼‰
â”‚   â”œâ”€â”€ i18n.ts            # å›½éš›åŒ–ï¼ˆ4è¨€èª + SEOç¿»è¨³ï¼‰
â”‚   â”œâ”€â”€ locale-config.ts   # ãƒ­ã‚±ãƒ¼ãƒ«è¨­å®š
â”‚   â”œâ”€â”€ seo-utils.ts       # SEOãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ»JSON-LDãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â””â”€â”€ audioSynthesis.ts  # Web Audioåˆæˆ
â”‚
â”œâ”€â”€ contexts/              # React Context
â”‚   â””â”€â”€ LanguageContext.tsx # URLé€£å‹•è¨€èªåˆ‡æ›¿
â”‚
â”œâ”€â”€ middleware.ts          # ãƒ­ã‚±ãƒ¼ãƒ«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ (/ â†’ /ja)
â”‚
â”œâ”€â”€ python-backend/        # FastAPIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ main.py            # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”‚
â””â”€â”€ public/                # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ ads.txt           # AdSenseè¨­å®š
    â””â”€â”€ og-image.svg      # OGç”»åƒSVGç‰ˆï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
```

---

## 4. Current Development Phase

### Phase Status

| Phase | Status | Description |
|-------|--------|-------------|
| Phase 1 | âœ… Complete | åŸºæœ¬UIãƒ»ã‚¹ã‚±ãƒ¼ãƒ«è¡¨ç¤º |
| Phase 2 | âœ… Complete | å¤šè¨€èªå¯¾å¿œãƒ»ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°æ‹¡å¼µ |
| Phase 3 | âœ… Complete | éŸ³å£°è§£æUIãƒ»ãƒ€ãƒŸãƒ¼API |
| Phase 4 | âœ… Complete | å®ŸéŸ³å£°è§£æå®Ÿè£…ï¼ˆlibrosaï¼‰ |
| Phase 5 | â³ Planned | æœ¬ç•ªç’°å¢ƒæœ€é©åŒ– |

### Recent Commits
- `72fe8dc` - docs: project-status.mdæ›´æ–°ï¼ˆAdSense/CMPå¯¾å¿œå®Œäº†ï¼‰
- `9df44b8` - AdSenseå¯¾å¿œå¼·åŒ–ï¼ˆCMPè¿½åŠ ã€firebase-debug.logé™¤å¤–ï¼‰
- `4e37f05` - googleå¯¾ç­–æ”¹å–„2

---

## 5. Completed Features

### âœ… Frontend
- [x] ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æŒ‡æ¿è¡¨ç¤º
- [x] 13ã‚¹ã‚±ãƒ¼ãƒ«å¯¾å¿œï¼ˆãƒ¡ã‚¸ãƒ£ãƒ¼ã€œéƒ½ç¯€ï¼‰
- [x] 6ã€œ9å¼¦ã‚®ã‚¿ãƒ¼å¯¾å¿œ
- [x] 13ç¨®é¡ã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°å¯¾å¿œ
- [x] åŠéŸ³ä¸‹ã’ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°å¯¾å¿œ
- [x] ã‚¹ã‚±ãƒ¼ãƒ«éŸ³å£°å†ç”Ÿ
- [x] URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¯¾å¿œï¼ˆ`?note=G&scale=ãƒ¡ã‚¸ãƒ£ãƒ¼`ï¼‰
- [x] å¤šè¨€èªå¯¾å¿œï¼ˆ4è¨€èªï¼‰
- [x] YouTubeå‹•ç”»ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
- [x] ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰UIï¼ˆDrag & Dropï¼‰
- [x] GA4ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
- [x] AdSenseå¯©æŸ»ç”¨ãƒšãƒ¼ã‚¸ï¼ˆAbout, Contact, Terms, Privacy, Companyï¼‰
- [x] è¨˜äº‹ã‚«ãƒ«ãƒ¼ã‚»ãƒ«

### âœ… Backend
- [x] FastAPIåŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] Dockerã‚³ãƒ³ãƒ†ãƒŠåŒ–
- [x] Vercel Blobé€£æº
- [x] librosaéŸ³å£°è§£æï¼ˆã‚­ãƒ¼æ¤œå‡ºã€ã‚³ãƒ¼ãƒ‰é€²è¡Œæ¤œå‡ºï¼‰
- [x] è»¢èª¿æ¤œå‡ºï¼ˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ†å‰²è§£æï¼‰
- [x] ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰API

### âœ… Music Theory
- [x] ç†è«–æº–æ‹ ã‚¹ã‚±ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³
- [x] ç•°ååŒéŸ³ï¼ˆã‚¨ãƒ³ãƒãƒ¼ãƒ¢ãƒ‹ãƒƒã‚¯ï¼‰å‡¦ç†
- [x] åº¦æ•°è¡¨è¨˜å¯¾å¿œ

---

## 6. In Progress / TODO

### âœ… Recently Completed (2026-02-03)

#### å¤šè¨€èªSEOå¯¾å¿œï¼ˆã‚¿ã‚¹ã‚¯#7ï¼‰- å®Œäº†
- [x] URLæ§‹é€ å¤‰æ›´: `/about` â†’ `/ja/about`, `/en/about`, `/zh/about`, `/es/about`
- [x] 308ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ: `/` â†’ `/ja`ï¼ˆæœ«å°¾ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ãªã—çµ±ä¸€ï¼‰
- [x] hreflangã‚¿ã‚°: HTMLãƒ˜ãƒƒãƒ€ãƒ¼ + ã‚µã‚¤ãƒˆãƒãƒƒãƒ—ä¸¡æ–¹
- [x] `<html lang>` å‹•çš„åˆ‡æ›¿
- [x] ã‚µã‚¤ãƒˆãƒãƒƒãƒ—: 52ã‚¨ãƒ³ãƒˆãƒªï¼ˆ13ãƒšãƒ¼ã‚¸Ã—4è¨€èªï¼‰ã€é™çš„lastModified
- [x] OGç”»åƒ: Next.js ImageResponseã§å‹•çš„PNGç”Ÿæˆï¼ˆ1200x630ï¼‰
- [x] è¨˜äº‹ãƒšãƒ¼ã‚¸: OG type `article`ã€Article/BreadcrumbList JSON-LD
- [x] /ads.txt ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢é™¤å¤–ï¼ˆAdSenseå¯¾å¿œï¼‰

#### SEOæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
- [x] WebApplication JSON-LDï¼ˆãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼‰
- [x] Organization JSON-LD
- [x] Article JSON-LDï¼ˆè¨˜äº‹ãƒšãƒ¼ã‚¸ï¼‰+ image ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- [x] BreadcrumbList JSON-LDï¼ˆè¨˜äº‹ãƒšãƒ¼ã‚¸ï¼‰

#### AdSense/GDPRå¯¾å¿œ - å®Œäº†
- [x] `/ads.txt` ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢é™¤å¤–ãƒ»200 OKç¢ºèªæ¸ˆã¿
- [x] Google Funding Choices (CMP) ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¿½åŠ 
  - EEA/UK/CHå‘ã‘TCF v2.3å¯¾å¿œ
  - å¯©æŸ»é€šéå¾Œã€AdSenseç®¡ç†ç”»é¢ã§GDPRãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¨­å®šãŒå¿…è¦
- [x] firebase-debug.log ã‚’ .gitignore ã«è¿½åŠ 

#### Phase 4: éŸ³å£°è§£æå®Ÿè£… - å®Œäº† (2026-02-03)
- [x] librosaã«ã‚ˆã‚‹å®ŸéŸ³å£°è§£æ
- [x] ã‚­ãƒ¼æ¤œå‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆCQT/CENSã‚¯ãƒ­ãƒ + Krumhansl-Kesslerï¼‰
- [x] è»¢èª¿ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰æ¤œå‡ºï¼ˆ15ç§’ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ†å‰²è§£æï¼‰
- [x] ãƒ“ãƒ¼ãƒˆåŒæœŸã‚³ãƒ¼ãƒ‰é€²è¡Œæ¤œå‡º
- [x] ã‚¹ã‚±ãƒ¼ãƒ«ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- [x] ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰APIï¼ˆ/api/upload-localï¼‰
- [x] è§£æãƒšãƒ¼ã‚¸æ–‡è¨€æ”¹å–„ï¼ˆ4è¨€èªå¯¾å¿œï¼‰

### ğŸ”„ High Priority

#### Error Handling
- [ ] ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼
- [ ] è§£æå¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–

#### Backend Deployment
- [ ] æœ¬ç•ªç’°å¢ƒã¸ã®Pythonãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆRailway/Renderç­‰ï¼‰

### âš ï¸ Medium Priority

#### Testing
- [ ] E2Eãƒ†ã‚¹ãƒˆè¿½åŠ 
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆæ‹¡å……
- [ ] éŸ³æ¥½ç†è«–ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ

#### Performance
- [ ] ãƒ¢ãƒã‚¤ãƒ«æŒ‡æ¿ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–
- [ ] ã‚¹ã‚±ãƒ¼ãƒ«è¨ˆç®—ãƒ¡ãƒ¢åŒ–
- [ ] é…å»¶èª­ã¿è¾¼ã¿å®Ÿè£…

### ğŸ“‹ Low Priority

#### Code Quality
- [ ] console.logå‰Šé™¤ï¼ˆ169ç®‡æ‰€ï¼‰
- [ ] æ§‹é€ åŒ–ãƒ­ã‚®ãƒ³ã‚°å°å…¥
- [ ] CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰

#### Post-SEOä½œæ¥­
- [ ] Search Console ã‚µã‚¤ãƒˆãƒãƒƒãƒ—å†é€ä¿¡
- [ ] æ–°è¨€èªç‰ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç™»éŒ²ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆ/en, /zh, /esï¼‰

---

## 7. Known Issues

### Critical
- ãªã—

### Major
1. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥æœªå®š** - ãƒ­ãƒ¼ã‚«ãƒ«Dockerã®ã¿ï¼ˆRailwayç„¡æ–™æ çµ‚äº†ï¼‰

### Minor
1. ãƒ¢ãƒã‚¤ãƒ«ã§ã®æŒ‡æ¿ã‚¿ãƒƒãƒæ“ä½œæ”¹å–„ä½™åœ°
2. è§£æé€²æ—ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã§ãªã„
3. ä¸€éƒ¨ã®ã‚¹ã‚±ãƒ¼ãƒ«ã§åº¦æ•°ãƒ©ãƒ™ãƒ«è¡¨ç¤ºèª¿æ•´å¿…è¦

---

## 8. Environment Setup

### Frontend
```bash
npm install
npm run dev      # localhost:3000
```

### Backend
```bash
cd python-backend
docker compose up --build
```

### Environment Variables (.env.local)
```env
PYTHON_BACKEND_URL=http://localhost:8000
STORAGE_MODE=vercel-blob  # local | vercel-blob | s3
TMP_DIR=/tmp/guitar-scale
```

---

## 9. Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Browser                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  React 19 + TypeScript                        â”‚  â”‚
â”‚  â”‚  â”œâ”€ GuitarFretboard (æŒ‡æ¿è¡¨ç¤º)                â”‚  â”‚
â”‚  â”‚  â”œâ”€ AudioAnalyzer (è§£æãƒ•ãƒ­ãƒ¼)                â”‚  â”‚
â”‚  â”‚  â””â”€ Scale/Note Selectors                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                           â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Next.js 16       â”‚   â”‚  Vercel Blob           â”‚
â”‚  App Router       â”‚   â”‚  (éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜)    â”‚
â”‚  â””â”€ API Routes    â”‚   â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Python FastAPI (Docker)          â”‚
â”‚  â”œâ”€ POST /analyze                 â”‚
â”‚  â”œâ”€ librosaéŸ³å£°å‡¦ç†               â”‚
â”‚  â””â”€ ã‚¹ã‚±ãƒ¼ãƒ«ãƒãƒƒãƒãƒ³ã‚°            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. Next Steps

### Immediate (Phase 5)
1. æœ¬ç•ªãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆRailway/Render/Fly.ioç­‰ï¼‰
2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
3. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š

### Short-term
1. è§£æç²¾åº¦å‘ä¸Šï¼ˆEssentiaå°å…¥æ¤œè¨ - ARM64å¯¾å¿œå¾…ã¡ï¼‰
2. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—æ›´æ–°
3. è§£æçµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥

### Mid-term
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ©Ÿèƒ½
2. è§£æå±¥æ­´ä¿å­˜
3. è¿½åŠ ã‚¹ã‚±ãƒ¼ãƒ«ãƒ»ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

---

## 11. File Reference

| Category | Key Files |
|----------|-----------|
| Entry Point | `app/[locale]/page.tsx`, `app/[locale]/layout.tsx` |
| Scale Logic | `lib/scales.ts`, `lib/scaleEngine.ts` |
| i18n | `lib/i18n.ts`, `lib/locale-config.ts`, `contexts/LanguageContext.tsx` |
| SEO | `lib/seo-utils.ts`, `app/sitemap.ts`, `app/opengraph-image.tsx` |
| Routing | `middleware.ts`, `components/LocaleLink.tsx` |
| Audio | `lib/audioSynthesis.ts`, `components/ScalePlayer.tsx` |
| Analysis | `components/AudioAnalyzer.tsx`, `python-backend/main.py` |
| Config | `next.config.ts`, `tailwind.config.ts`, `.env.local` |
| Spec | `scale_repare.md` (éŸ³æ¥½ç†è«–ä»•æ§˜æ›¸) |

---

## 12. SEO Implementation Details (2026-02-03)

### URL Structure
```
/           â†’ 308 redirect to /ja
/ja         â†’ Japanese (default)
/en         â†’ English
/zh         â†’ Chinese
/es         â†’ Spanish
/ja/about   â†’ Japanese about page
/en/about   â†’ English about page
...
```

### hreflang Implementation
- **HTML**: `<link rel="alternate" hrefLang="ja" href="..."/>` (5 languages incl. x-default)
- **Sitemap**: `<xhtml:link rel="alternate" hreflang="ja" href="..."/>` per entry

### OG Image
- Endpoint: `/opengraph-image` (Next.js ImageResponse)
- Format: PNG (1200x630)
- Dynamic generation via Edge runtime

### Structured Data
| Page Type | JSON-LD Types |
|-----------|---------------|
| Homepage | WebApplication, Organization, WebSite |
| Articles | Article (with image), BreadcrumbList |

### Middleware Skip Patterns
```
/api/, /_next/, /favicon.ico, /icon.png, /robots.txt,
/sitemap.xml, /ads.txt, /opengraph-image, /twitter-image
```

### New Language URLs for Index Request
```
https://www.guitar-scale.com/en
https://www.guitar-scale.com/zh
https://www.guitar-scale.com/es
```
